<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AstraCard | Personalized Magic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Inter:wght@400;700&family=Playfair+Display:ital,wght@1,700&family=Lora:italic,wght@1,600&display=swap"
        rel="stylesheet">
    <style>
        :root {
            /* Default: Festive Rose */
            --primary-bg: radial-gradient(circle at top left, #fff5f5, #fffbeb);
            --card-grad: linear-gradient(135deg, #ffffff 0%, #fff9f0 100%);
            --accent-text: #e11d48;
            --box-bg: #fff1f2;
            --box-shadow: #fecdd3;
            --btn-main: #be123c;
        }

        .theme-indigo {
            --primary-bg: radial-gradient(circle at top left, #eef2ff, #e0e7ff);
            --card-grad: linear-gradient(135deg, #ffffff 0%, #f5f7ff 100%);
            --accent-text: #4338ca;
            --box-bg: #eef2ff;
            --box-shadow: #c7d2fe;
            --btn-main: #3730a3;
        }

        .theme-green {
            --primary-bg: radial-gradient(circle at top left, #f0fdf4, #dcfce7);
            --card-grad: linear-gradient(135deg, #ffffff 0%, #f0fff4 100%);
            --accent-text: #15803d;
            --box-bg: #f0fdf4;
            --box-shadow: #bbf7d0;
            --btn-main: #166534;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--primary-bg);
            transition: all 0.5s ease;
        }

        .handwritten-fortune {
            font-family: 'Playfair Display', serif;
            font-style: italic;
        }

        .card-inner {
            background: var(--card-grad);
            border: 2px solid rgba(0, 0, 0, 0.05);
        }

        /* 3D Box Styling */
        .fortune-box {
            background: var(--box-bg);
            border-left: 8px solid var(--accent-text);
            transform: perspective(1000px) rotateX(2deg) rotateY(-1deg);
            box-shadow:
                10px 10px 0px var(--box-shadow),
                15px 15px 25px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .fortune-box:hover {
            transform: perspective(1000px) rotateX(0deg) rotateY(0deg) translateZ(10px);
        }

        .btn-primary {
            background-color: var(--btn-main);
        }

        .text-accent {
            color: var(--accent-text);
        }

        /* This defines the 'levitation' movement */
        @keyframes floating {
            0% {
                transform: perspective(1000px) translateY(0px) rotateX(2deg) rotateY(-1deg);
                box-shadow: 10px 10px 0px var(--box-shadow), 15px 15px 25px rgba(0, 0, 0, 0.05);
            }

            50% {
                transform: perspective(1000px) translateY(-15px) rotateX(1deg) rotateY(0deg);
                /* Shadow gets softer and more spread out as the box rises */
                box-shadow: 10px 25px 15px var(--box-shadow), 20px 30px 40px rgba(0, 0, 0, 0.03);
            }

            100% {
                transform: perspective(1000px) translateY(0px) rotateX(2deg) rotateY(-1deg);
                box-shadow: 10px 10px 0px var(--box-shadow), 15px 15px 25px rgba(0, 0, 0, 0.05);
            }
        }

        /* Apply it to your fortune box */
        .fortune-box {
            animation: floating 4s ease-in-out infinite;
            /* This ensures the shadow moves with it for realism */
            transition: box-shadow 0.3s ease;
        }
    </style>
</head>

<body class="min-h-screen p-4 md:p-8 flex items-center justify-center">

    <div class="max-w-5xl w-full grid grid-cols-1 lg:grid-cols-2 gap-10 items-start">

        <div class="bg-white/90 backdrop-blur-md p-8 rounded-3xl shadow-xl border border-white">
            <h1 class="text-3xl font-bold mb-6 text-gray-800">AstraCard ‚ú®</h1>

            <div class="mb-6">
                <label class="block text-xs font-bold text-gray-400 uppercase mb-3">Select Aesthetic</label>
                <div class="flex gap-3">
                    <button onclick="setTheme('rose')"
                        class="w-10 h-10 rounded-xl bg-rose-500 shadow-lg hover:scale-110 transition-all"></button>
                    <button onclick="setTheme('indigo')"
                        class="w-10 h-10 rounded-xl bg-indigo-500 shadow-lg hover:scale-110 transition-all"></button>
                    <button onclick="setTheme('green')"
                        class="w-10 h-10 rounded-xl bg-green-500 shadow-lg hover:scale-110 transition-all"></button>
                </div>
            </div>

            <div class="space-y-4">
                <input type="text" id="name" placeholder="Friend's Name"
                    class="w-full p-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-gray-200 outline-none">
                <input type="number" id="age" placeholder="Age"
                    class="w-full p-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-gray-200 outline-none">
                <input type="text" id="hobby" placeholder="Hobby (e.g. Coding, Yoga)"
                    class="w-full p-4 bg-gray-50 border-none rounded-2xl focus:ring-2 focus:ring-gray-200 outline-none">

                <div class="pt-4 space-y-3">
                    <button onclick="generateCard()"
                        class="w-full btn-primary text-white font-bold py-4 rounded-2xl shadow-xl transform active:scale-95 transition-all text-lg">
                        Create Card
                    </button>
                    <button onclick="feelingLucky()"
                        class="w-full bg-gray-100 text-gray-600 font-bold py-3 rounded-2xl hover:bg-gray-200 transition-all">
                        üé≤ I'm Feeling Lucky!
                    </button>
                </div>
            </div>
        </div>

        <div id="card-display" class="hidden">
            <div id="capture-area"
                class="card-inner p-12 rounded-[3rem] shadow-2xl relative overflow-hidden min-h-[550px] flex flex-col justify-between">

                <div>
                    <div class="text-accent font-bold tracking-widest text-sm mb-4">BIRTHDAY EDITION</div>
                    <h3 class="text-5xl font-bold text-gray-900 mb-2">
                        <span id="out-name"></span>
                    </h3>
                    <p class="text-2xl text-gray-400 serif-italic mb-10">
                        Level <span id="out-age"></span> Unlocked
                    </p>

                    <p id="out-message" class="text-xl text-gray-700 leading-relaxed max-w-sm"></p>
                </div>

                <div class="fortune-box p-8 mt-12 relative">
                    <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400 font-bold mb-4">The Fortune</p>
                    <p id="out-fortune" class="handwritten-fortune text-2xl text-accent leading-snug"></p>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4 mt-8">
                <button onclick="downloadCard()"
                    class="flex items-center justify-center gap-2 py-4 bg-white text-gray-800 font-bold rounded-2xl border-2 border-gray-100 shadow-sm hover:bg-gray-50 transition-all">
                    üì• Download PNG
                </button>
                <button onclick="window.print()"
                    class="flex items-center justify-center gap-2 py-4 bg-gray-900 text-white font-bold rounded-2xl shadow-lg hover:bg-black transition-all">
                    üñ®Ô∏è Print
                </button>
            </div>
        </div>
    </div>

    <script>
        const randomData = {
            names: ["Arjun", "Elena", "Kavi", "Leo", "Sasha", "Milo", "Zoe", "Iniyan"],
            hobbies: ["Photography", "Baking", "Hiking", "Chess", "Poetry", "Urban Sketching", "Yoga", "Stargazing", "AI Engineering"],
            fortunes: [
                "Your heart will lead you to a hidden treasure this year.",
                "A significant conversation will change your perspective.",
                "Abundance flows to you in unexpected ways.",
                "A long-held dream is closer to reality than you think."
            ]
        };

        function setTheme(theme) {
            document.body.className = "min-h-screen p-4 md:p-8 flex items-center justify-center";
            if (theme !== 'rose') document.body.classList.add('theme-' + theme);
        }

        function feelingLucky() {
            document.getElementById('name').value = randomData.names[Math.floor(Math.random() * randomData.names.length)];
            document.getElementById('age').value = Math.floor(Math.random() * 40) + 18;
            document.getElementById('hobby').value = randomData.hobbies[Math.floor(Math.random() * randomData.hobbies.length)];
            generateCard();
        }

        function generateCard() {
            const name = document.getElementById('name').value || "Wonderful Soul";
            const age = document.getElementById('age').value || "??";
            const hobby = document.getElementById('hobby').value.toLowerCase() || "enjoying life";

            let msg = `May your year be as vibrant and unique as your passion for ${hobby}.`;
            if (hobby.includes('ai') || hobby.includes('code')) {
                msg = `Optimizing your ${age}th year for peak performance. You're the most advanced model we know!`;
            }

            document.getElementById('out-name').innerText = name;
            document.getElementById('out-age').innerText = age;
            document.getElementById('out-message').innerText = msg;
            document.getElementById('out-fortune').innerText = `"${randomData.fortunes[Math.floor(Math.random() * randomData.fortunes.length)]}"`;

            document.getElementById('card-display').classList.remove('hidden');
            document.getElementById('card-display').scrollIntoView({ behavior: 'smooth' });

            // --- Added Confetti Logic ---
            if (typeof confetti === 'function') {
                confetti({
                    particleCount: 150,
                    spread: 70,
                    origin: { y: 0.6 },
                    colors: ['#FFD700', '#B76E79', '#FFFFFF']
                });
            }
        }
        function downloadCard() {
            const card = document.getElementById('capture-area');
            html2canvas(card, { scale: 2, useCORS: true }).then(canvas => {
                const link = document.createElement('a');
                link.download = `AstraCard_${document.getElementById('out-name').innerText}.png`;
                link.href = canvas.toDataURL();
                link.click();
            });
        }
    </script>
</body>

</html>